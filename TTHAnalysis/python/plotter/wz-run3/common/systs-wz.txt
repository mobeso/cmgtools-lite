# vim: syntax=sh

# -- Systematic uncertainties file for WZ analyis -- #
### Alias definitions
# signal
$alias : WZ           : .*prompt_WZ.*

# prompts
$alias : ZZ           : .*prompt_ZZ.*
$alias : VVV          : .*prompt_VVV.*
$alias : ttx          : .*prompt_TTX.*
$alias : promptMC     : $ZZ|$VVV|$ttx

# fakes
$alias : DY     : .*fakes_DY.*
$alias : VV     : .*fakes_VV.*
$alias : TT     : .*fakes_TT.*
$alias : ST     : .*fakes_T.*
$alias : Wjets  : .*Wjets.*
$alias : NonpromptMC  : $DY|$VV|$TT|$ST|$Wjets

# convs
$alias : convs : .*conv.*

# Correlated groups
$alias : bkg : $promptMC|$NonpromptMC|$convs
$alias : allProcs : $WZ|$bkg

## Lumi uncertainties 
lumi_2022_early  : $allProcs  : .*  : normSymm  :1.022

## Normalization 
normZZ    : $ZZ      : .* : normSymm : 1.06
normVVV   : $VVV     : .* : normSymm : 1.50
normConvs : $convs   : .* : normSymm : 1.12
normfakes : $mcfakes : .* : normSymm : 1.50
normttx   : $ttx     : .* : normSymm : 1.15

## JECs 
jesHF                  : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesHFUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesHFDown.txt'] 
jesBBEC1_year          : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesBBEC1_yearUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesBBEC1_yearDown.txt']
jesFlavorQCD           : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesFlavorQCDUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesFlavorQCDDown.txt'] 
jesRelativeSample_year : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesRelativeSample_yearUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesRelativeSample_yearDown.txt'] 
jesEC2                 : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesEC2Up.txt'\,'wz-run3/common/frs-jec/fr-standard-jesEC2Down.txt'] 
jesHF_year             : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesHF_yearUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesHF_yearDown.txt'] 
jesRelativeBal         : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesRelativeBalUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesRelativeBalDown.txt'] 
jesAbsolute_year       : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesAbsolute_yearUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesAbsolute_yearDown.txt'] 
jesBBEC1               : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesBBEC1Up.txt'\,'wz-run3/common/frs-jec/fr-standard-jesBBEC1Down.txt'] 
jesEC2_year            : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesEC2_yearUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesEC2_yearDown.txt'] 
jesAbsolute            : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-jec/fr-standard-jesAbsoluteUp.txt'\,'wz-run3/common/frs-jec/fr-standard-jesAbsoluteDown.txt']

## Electron scales and smearings
elec_scale : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-lepScales/fakerate_standard_ScaleUp.txt'\,'wz-run3/common/frs-lepScales/fakerate_standard_ScaleDown.txt'] 
elec_smear : $allProcs : .* : templateAsymm; FakeRates=['wz-run3/common/frs-lepScales/fakerate_standard_SmearUp.txt'\,'wz-run3/common/frs-lepScales/fakerate_standard_SmearDown.txt'] 

## Lepton SFs 
elecidsf : $allProcs : .* : templateAsymm;    AddWeights=["electronSF_Up/electronSF"\,"electronSF_Down/electronSF"]
muonidsf_ID : $allProcs : .* : templateAsymm; AddWeights=["muonSF_Up/muonSF"\,"muonSF_Down/muonSF"]

## Pileup
pileup : $allProcs : .* : templateAsymm; AddWeights=["puWeight_up/puWeight"\,"puWeight_dn/puWeight"]

## btag SFs
btag_LF : $allProcs : .* : templateAsymm; AddWeights=['bTagWeight_mistag_Up/bTagWeight'\,'bTagWeight_mistag_Dn/bTagWeight']
btag_HF : $allProcs : .* : templateAsymm; AddWeights=['bTagWeight_btag_Up/bTagWeight'\,'bTagWeight_btag_Dn/bTagWeight']

## Signal uncertainties
ISR  : $WZ : .* : templateAsymm; FakeRates=['wz-run3/common/frs-ps/fr-isrUp.txt'\,'wz-run3/common/frs-ps/fr-isrDown.txt']
FSR  : $WZ : .* : templateAsymm; FakeRates=['wz-run3/common/frs-ps/fr-fsrUp.txt'\,'wz-run3/common/frs-ps/fr-fsrDown.txt']
